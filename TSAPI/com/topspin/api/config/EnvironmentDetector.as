package com.topspin.api.config{/** * ----------------------------------------------------------------- * Copyright (c) 2008 Topspin, Inc. All Right Reserved. * This software is the proprietary information of Topspin, Inc. * Use is subject to strict licensing terms. * ----------------------------------------------------------------- *  * Static application environment detector.  Used for developement and * also deployed classes, will parse URL and return a base url whether it * be local dev, staging, itest, or production. *  * Usage: * <code> * 		var envBaseURL : String = EnvironmentDetector.parseBaseURL(root.loaderInfo); * </code> * 	 * * @copyright	Topspin * @author		tkarnezos@topspinmedia.com */  			public class EnvironmentDetector {		import flash.display.LoaderInfo;				static private const envRegexes : Array = [new RegExp(/(https?:\/\/[\w|-]+\.local:\d+)/),													new RegExp(/(https?:\/\/newqa.topspin.net)/), 													new RegExp(/(https?:\/\/staging.topspin.net)/), 													new RegExp(/(https?:\/\/preprod.topspin.net)/),													new RegExp(/(https?:\/\/qa1.topspin.net)/), 													new RegExp(/(https?:\/\/qa2.topspin.net)/), 													new RegExp(/(https?:\/\/qa3.topspin.net)/), 													new RegExp(/(https?:\/\/qa.cdn.topspin.net)/),													new RegExp(/(https?:\/\/qa3.cdn.topspin.net)/),													new RegExp(/(https?:\/\/pp.cdn.topspin.net)/), 													new RegExp(/(https?:\/\/cc1.lax.topspin.net)/), 																										new RegExp(/(https?:\/\/cc2.lax.topspin.net)/), 																										new RegExp(/(https?:\/\/cdn.topspin.net)/),													new RegExp(/(https?:\/\/(app|bits-\d).topspin.net)/)];				static public function parseBaseURL ( loader : LoaderInfo = null) : String {			var envBaseURL : String;			if (loader)			{				var livingURL : String = loader.url;											//grab the base URL from the current URL				for each (var reg : RegExp in envRegexes) {					var matches : Object = reg.exec(livingURL);					if (matches != null) {						envBaseURL = matches[0];						trace("BASEURL : " + envBaseURL);						break;					}				}				if (envBaseURL == null) {					if (livingURL.indexOf("file:///") != -1) {						/*	throw new Error("You must run this swf from a browser!");*/						trace("You must run this swf from a browser!");					}					envBaseURL = loader.url; //"http://app.topspin.net";				}			}else{				envBaseURL = "http://app.topspin.net";			}			return envBaseURL;		}					}	}